= Learning Lab Scenario 2: Automation Hub Deployment Failure
:revdate: 2025-12-11

[#scenario-2]
== Scenario 2: Automation Hub Deployment Stuck

[cols="1,3", options="header"]
|===
| **MODE** | Easy
| **Components** | Ansible Automation Hub
| **Namespace** | `scenario-2`
|===

### üéØ Objective

* Find out why the Automation Hub deployment is stuck and fails to complete successfully.

[NOTE]
.Important
Focus your troubleshooting efforts on the **Hub Operator Logs** and the **Operator Pods**. The Automation Hub UI will not be available in this broken state.

---

### üöÄ Initial Setup and Failure Injection

Perform the following steps to deploy the environment and inject the deliberate break.

.   **Deploy the Scenario**
    Run the following command in your lab environment and select **Scenario 2** when prompted to set up the lab components.
    [source,bash]
    ----
    ansible-playbook site.yml -t deploy
    ----

.   **Inject the Failure**
    Run the following command to introduce the issue that prevents the Automation Hub from deploying correctly. Select **Scenario 2**.
    [source,bash]
    ----
    ansible-playbook site.yml -t break
    ----

---

### üõ†Ô∏è Troubleshooting Steps

Follow these steps to diagnose and resolve the issue.

.   **Diagnose the Failure**
    Begin by examining the resources in the `scenario-2` namespace. Look specifically at the logs and status of the Automation Hub Operator and the Hub API pods.
    
TIP: **Hint 1: Operator Logs**::
Take a look at the `hub-operator-manager` logs. The errors here often point directly to the underlying resource failure.

.   **Investigate Pod Status**
    Check the status and logs of the `hub-api` pods. Are they stuck in a pending state, or are they repeatedly failing?

TIP: **Hint 2: Storage Check**::
Review the errors seen within the `hub-api` pods. Is there storage defined and available for Hub?

.   **Apply the Fix (Once Identified)**
    Once you have identified the missing or incorrect resource configuration, you can use the fix playbook to resolve the issue. Select **Scenario 2** when prompted.
    [source,bash]
    ----
    ansible-playbook site.yml -t fix
    ----

.   **Verify Deployment**
    Wait for the Automation Hub pods to transition to a running state, and verify that the deployment finishes. You should be able to access the Automation Hub UI if the fix was successful.