# Scenario #2: Automation Hub Issues

[#scenario-02,cols="3"]
.Scenario #2: Automation Hub Issues
|===
| **Mode** | **Components** | **Namespace**

| Easy
| Automation Hub
| `scenario-2`
|===

### ðŸ“ Objectives

* Verify the health of the **Automation Hub** pods.
* Diagnose and resolve the underlying issue

---

### ðŸ› ï¸ Prerequisites: Setup and Break

#### 1. Initial Deployment

[.instruction]
====
Execute the following command, then select **Scenario 2** when prompted.
====

[source,bash]
----
ansible-playbook site.yml
----

#### 2. Introduce Failure (Break)

[.instruction]
====
Execute the following command, then select **Scenario 2** when prompted.
====

[source,bash]
----
ansible-playbook site.yml -t break
----

[NOTE]
====
Automation Hub UI will not be available through the scenario, this is expected behavior.
====

---

### âœ… Troubleshooting and Resolution

#### Step 1: Inspect Pods

The first step is to check which components are failing and why they cannot start.

[.instruction]
====
**CLI Method:** Check the status of Hub pods and the associated PVCs.
====

[source,bash]
----
oc get pods -n scenario-2
oc get pvc -n scenario-2
----

[.instruction]
====
**UI Method:**
1. Navigate to **Workloads** -> **Pods** in the OpenShift console. Filter by the `scenario-2` namespace.
2. Observe any Hub-related pods stuck in a `Pending` state.
3. Navigate to **Storage** -> **Persistent Volume Claims (PVCs)** and inspect the status of the Hub PVC.
====

[.output]
====
Identify any Hub pods in a `Pending` state. Use the next step to find the reason for the failure.
====

#### Step 2: Investigate Pod Events for Failure Reason

[.instruction]
====
**CLI Method:** Describe the failing Hub pod and PVC to find the specific error.
====

[source,bash]
----
oc describe pod <failing-hub-pod> -n scenario-2
oc describe pvc data-automation-hub -n scenario-2
----

[.instruction]
====
**UI Method:**
1. Navigate to the detail page of the failing Hub pod.
2. Scroll to the **Events** section to read the scheduler's error message.
====

#### Step 3: Implement the Fix

[.instruction]
====
Once you have diagnosed the issue, follow the specific resolution steps located in the solution document: **xref:scenario-2-solution.adoc[2.1. Solution: Automation Hub Storage]**
====

#### Step 4: Verify Resolution

[.instruction]
====
Monitor the namespace until all Hub pods transition to a `Running` and ready state.
====

[source,bash]
----
oc get pods -n scenario-2
----

---

### ðŸ’¡ Hint

* The failure is related to how the **Automation Hub** attempts to utilize storage. Review the pod events (`oc describe pod <failing-hub-pod>`) to see what errors are present.