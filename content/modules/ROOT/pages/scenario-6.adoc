[#scenario-06,cols="3"]
.Scenario #6: Automation Controller Execution Environment (EE) Failure
|===
| **Mode** | **Components** | **Namespace**

| Easy
| Automation Controller
| `aap-rh1`
|===

### üìù Objectives

* Log in to the **AAP Gateway UI** successfully.
* Launch the four available job templates and identify the failure.
* Diagnose the root cause related to image pulling.
* Resolve the underlying issue by correcting the job template configuration.

---

### üí° Hint

* The failure occurs during the image pull phase. Review the logs for the specific **automation-job** pod that corresponds to the failed job template execution. The logs will indicate an authentication failure (`401 Unauthorized`) when pulling the **Execution Environment (EE)** image.

---

### üõ†Ô∏è Prerequisites: Setup and Break

#### 1. Initial Deployment

[.instruction]
====
Execute the following command, then select **Scenario 6** when prompted.
====

[source,bash]
----
ansible-playbook site.yml -t deploy
----

#### 2. Introduce Failure (Break)

[.instruction]
====
Execute the following command, then select **Scenario 6** when prompted.
====

[source,bash]
----
ansible-playbook site.yml -t break
----

[NOTE]
====
This break modifies one job template to reference a private Execution Environment without the necessary container registry credentials.
====

---

### ‚úÖ Steps to Resolution

#### Step 1: Launch Job Templates and Identify Failure

[.instruction]
====
In the Automation Controller UI, launch all four job templates and identify the one that fails immediately due to an image pull error.
====

#### Step 2: Inspect Job Pod Logs

[.instruction]
====
Find the specific **automation-job** pod associated with the failed job and view its logs.
====

[source,bash]
----
oc logs -n aap-rh1 <automation-job-pod-name>
----

[.output]
====
The logs will show a pull failure or authentication error when fetching the EE image from the registry (e.g., Quay).
====

#### Step 3: Implement the Fix

[.instruction]
====
Edit the failing job template in the Automation Controller UI to change the **Execution Environment** setting to one that is known to be accessible (e.g., the same EE used by the successful job templates).
====

#### Step 4: Verify Resolution

[.instruction]
====
Launch the previously failing job template again.
====

[.output]
====
The job should now successfully pull the EE image and run to completion.
====