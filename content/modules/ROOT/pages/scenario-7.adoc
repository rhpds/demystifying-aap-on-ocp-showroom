[#scenario-07,cols="3"]
.Scenario #7: Ansible Lightspeed Intelligent Assistant (ALIA) Failure
|===
| **Mode** | **Components** | **Namespace**

| Easy
| Ansible Lightspeed Intelligent Assistant (ALIA)
| `aap-rh1`
|===

### üìù Objectives

* Log in to the **AAP Gateway UI** successfully.
* Observe that the **ALIA** chat icon is missing.
* Diagnose the underlying issue preventing the ALIA UI component from activating.
* Resolve the issue by correcting the model configuration.

---

### üí° Hint

* The ALIA service requires a valid connection to a Large Language Model (LLM). Review the logs for the `lightspeed-api` and `chatbot` pods. Look for messages referencing **model names** or **authentication/access errors**.
* The required model name is available on the **Lab Resource Page**.

---

### üõ†Ô∏è Prerequisites: Setup and Break

#### 1. Initial Deployment

[.instruction]
====
Execute the following command, then select **Scenario 7** when prompted.
====

[source,bash]
----
ansible-playbook site.yml -t deploy
----

#### 2. Introduce Failure (Break)

[.instruction]
====
Execute the following command, ensuring you replace the placeholder with the correct token value from your Lab Resource Page. Select **Scenario 7** when prompted.
====

[source,bash]
----
ansible-playbook site.yml -t break -e chatbot_token='token_value_from_resource_page'
----

[NOTE]
====
This command sets the ALIA configuration to use an unauthorized or incorrect AI model.
====

---

### ‚úÖ Steps to Resolution

#### Step 1: Inspect Pod Logs

[.instruction]
====
Inspect the logs for the `lightspeed-api` and `chatbot` pods.
====

[source,bash]
----
oc logs -n aap-rh1 <lightspeed-api-pod-name>
oc logs -n aap-rh1 <chatbot-pod-name>
----

[.output]
====
The logs will confirm that the service is attempting to connect to an invalid model.
====

#### Step 2: Implement the Configuration Fix

[.instruction]
====
Edit the `chatbot-configuration-secret` to change the invalid model name to the correct, authorized model (`granite-3-2-8b-instruct`).
====

[TIP]
====
You may need to base64 decode/encode values if editing the secret directly via YAML.
====

#### Step 3: Force Reconciliation

[.instruction]
====
Delete the **Lightspeed Operator** manager pod to force the service to reload the corrected secret.
====

#### Step 4: Verify Resolution

[.instruction]
====
Check the AAP Gateway UI.
====

[.output]
====
The **Ansible Lightspeed Intelligent Assistant** chat icon should now be visible and functional.
====